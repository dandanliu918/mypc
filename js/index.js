/** * Created by liudandan on 20161/12. *///导航部分;(function () {  var oNav=document.getElementById('nalis');  var aLi=oNav.getElementsByTagName('li');  var n=0;//初始值  for(var i=1;i<aLi.length;i++){       aLi[i].onclick=function () {          this.className='on';       };       aLi[i].onmouseout=function () {         this.className=null;       }    }})()//搜索框var searchRender=(function () {    var searchbox=document.getElementById('searchbox');    var txt=document.getElementById('txt');    var btn=document.getElementById('btn');    var listhot=document.getElementById('listhot');    var ali=listhot.getElementsByTagName('li');    var oA=listhot.getElementsByTagName('a');    //开始    var n=-1;    var oldValue=null;    return {        init:function () {            txt.onkeyup=txt.onfocus=function () {                var val=txt.value;                if(val.length){                    listhot.style.display='block';                }else{                    listhot.style.display='none';                }            }            //事件委托            document.body.onclick=function (e) {                e=e||window.event;                var tar=e.target||e.srcElement;                if(tar===txt){                    return;                }                if(tar===btn){                    window.open('https://www.baidu.com/s?wd='+txt.value+'_self');                }                if(tar.tagName.toLowerCase()==='a'){                    txt.value=tar.innerHTML;                    window.open('https://www.baidu.com/s?wd='+txt.value+'_self');                }                listhot.style.display='none';            }            //判断键盘上的键值            txt.onkeydown=function (e) {                e=e||window.event;                if(e.keyCode===40){                    n++;                    if(n>=oA.length){                        n=-1;                    }                    change();                }                if(e.keyCode===38){                    n--;                    if(n<-1){                        n=oA.length-1;                    }                    change();                }                if(e.keyCode===13){                    window.open('https://www.baidu.com/s?wd='+txt.value+'_self');                }            }            //改变颜色            function change() {                if(!txt.value){                    oldValue=txt.value;                }                for(var i=0;i<oA.length;i++){                    oA[i].className='';                }                if(n===-1){                    txt.value=oldValue;                }else{                    oA[n].className='on';                    txt.value=oA.innerHTML;                }            }        }    }})();searchRender.init();//轮播图var lunboRender=(function () {    //获取元素     var bannerbox=document.getElementById('bannerbox');     var banInner=document.getElementById('banInner');     var aDiv=banInner.getElementsByTagName('div');     var aImg=banInner.getElementsByTagName('img');     var ban_fcous=bannerbox.getElementsByTagName('ul')[0];     var Ali=ban_fcous.getElementsByTagName('li');     var step=null;    return {        init:function () {           //1）图片自动播放            clearInterval(timer);            var timer=setInterval(autoLunbo,2000);            function autoLunbo(){                if(step>=aDiv.length){                    step=-1;                }                step++;                 fadeImg();            }            function fadeImg() {                for(var i=0;i<aDiv.length;i++){                    if(i==step){                        utils.css(aDiv[i],'zIndex',1);                        animate({                            id:aDiv[i],                            target:{                                opacity:1                            },                            cb:function () {                                var siblings=utils.siblings(this);                                for(var i=0;i<siblings.length;i++){                                    utils.css(siblings[i],'opacity',0);                                }                            }                        })                    }else {                        utils.css(aDiv[i],'zIndex',0);                    }                }                tipauto();            }            function tipauto() {               for(var i=0;i<Ali.length;i++){                   Ali[i].className=i==step%3?'bg':null;               }            }        }    }})();lunboRender.init();//穿墙效果var chunqiangRender=(function () {    return {        init:function () {          //循环所有的盒子            var product_img=document.getElementById('product_img');            var aDiv=product_img.getElementsByClassName('productImg');            for(var i=0;i<aDiv.length;i++){                chuaqiang(aDiv[i]);            }            //穿墙效果            function chuaqiang(aDiv) {                var oMask=aDiv.getElementsByTagName('div')[0];                function hoverDiv(e) {                    var x=aDiv.offsetWidth/2+aDiv.offsetLeft-e.clientX;                    var y=aDiv.offsetHeight/2+aDiv.offsetTop-e.clientY;                    return Math.round((Math.atan2(y,x)*180/Math.PI+180)/90)%4;                }                aDiv.onmouseover=function (e) {                    e=e||window.event;                    var oTo=e.relatedTarget||e.fromElement;                    if(aDiv.contains(oTo)) return;                    var con=hoverDiv(e);                    switch (con){                        case 0:                            oMask.style.left=113+'px';                            oMask.style.top=0+'px';                            //console.log('1')//right                            break;                        case 1:                            oMask.style.left=0+'px';                            oMask.style.top=113+'px';                            // console.log('2')//bottom                            break;                        case 2:                            oMask.style.left=-113+'px';                            oMask.style.top=0+'px';                            //console.log('3')//left                            break;                        case 3:                            oMask.style.left=0+'px';                            oMask.style.top=-113+'px';                            // console.log('4')//top                            break;                    }                    animate({                        id:oMask,                        target:{                            left:0,                            top:0                        },                        duration:400                    })                }                aDiv.onmouseout=function (e) {                    e=e||window.event;                    var oTo=e.relatedTarget||e.toElement;                    if(aDiv.contains(oTo)) return;                    var con=hoverDiv(e);                    switch (con){                        case 0:                            animate({                                id:oMask,                                target:{                                    left:113,                                    top:0                                },                                duration:400                            })                            //console.log('1')//right                            console.log(top);                            break;                        case 1:                            animate({                                id:oMask,                                target:{                                    left:0,                                    top:113                                },                                duration:400                            })                            // console.log('2')//bottom                            break;                        case 2:                            animate({                                id:oMask,                                target:{                                    left:-113,                                    top:0                                },                                duration:400                            })                            //console.log('3')//left                            break;                        case 3:                            animate({                                id:oMask,                                target:{                                    left:0,                                    top:-113                                },                                duration:400                            })                            // console.log('4')//top                            break;                    }                }            }        }    }})();chunqiangRender.init();//数据拼接var pinjieRender=(function () {    var data=null;    var Boxcompny=document.getElementById('boxcompny');    //获取数据    function getData() {        var xhr=new XMLHttpRequest();        xhr.open('get','./json/company.json',false);        xhr.onreadystatechange=function () {            if(xhr.readyState==4 && xhr.status==200){                data=utils.jsonParse(xhr.responseText);            }        };        xhr.send(null);        console.log(data)    }    function bindHtml() {        var str='';        for(var i=0;i<data.length;i++){            var cur=data[i];            str+='<div class="position">\            <a href="#">\                <div class="position_one">\                <span class="tit_pos">'+cur.title+'</span>\                <span class="data_pos">'+cur.time+'</span>\            <span class="ico_pos"></span>\                <span class="sec_pos">'+cur.home+'</span>\                </div>\                <div class="position_one">\                <span class="xi_pos">'+cur.salary+'</span>\            <span class="ex_pos">'+cur.experience+'</span>\            <span class="com_pos">'+cur.company+'</span>\            </div>\            <div class="position_two">\                <span class="list_pos"> '+cur.position+'</span>\                <span class="list_pos"> '+cur.positions+'</span>\                <span class="list_pos"> '+cur.enlish+'</span>\                <span class="fu_pos">"'+cur.Insurance+'"</span>\                </div>\                </a>\                </div>';        }        Boxcompny.innerHTML=str;    }    return {        init:function () {            getData();            //数据绑定            bindHtml();        }    }})();pinjieRender.init();